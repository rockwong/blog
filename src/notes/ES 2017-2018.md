---
tags: [Notebooks/Javascript]
title: ES 2017-2018
created: '2019-02-25T14:15:27.038Z'
modified: '2019-02-25T14:18:17.497Z'
---

# ES 2017-2018

> å‚è€ƒï¼š 
> http://es6.ruanyifeng.com/ 
> https://blog.hypers.io/2018/04/11/es2016-17-18/

## æŒ‡æ•°è¿ç®—


```js
// ä¸ä½¿ç”¨
Math.pow(7,2) //49

//ä½¿ç”¨
7**2 //49
```

##æ•°ç»„çš„è§£æ„èµ‹å€¼
éœ€è¦ç­‰å·ä¸¤è¾¹éƒ½æ˜¯æ•°ç»„

```js
	var [a, b, c] = [1, 2, 3];
	let [foo, [[bar], baz]] = [1, [[2], 3]];
	/* å®¹è®¸æœ‰é»˜è®¤å€¼,å¦‚æœé»˜è®¤å€¼æ˜¯è¡¨è¾¾å¼,é‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼ */
	var [foo = true] = [];
```
##å¯¹è±¡çš„è§£æ„èµ‹å€¼

```js
var { bar, foo } = { foo: "aaa", bar: "bbb" };
```

## Object.values()
ä¸ `Object.keys()` ç±»ä¼¼ï¼Œè¿”å›è‡ªèº«æ‰€æœ‰å€¼ï¼Œæ’é™¤åŸå‹é“¾ä¸­çš„ä»»ä½•èŒ

```js
const cars = { 'BMW': 3, 'Tesla': 2, 'Toyota': 1 };

//ES2017 and æœªæ¥
const values = Object.values(cars);
console.log(values); // [3, 2, 1]

```
## Object.entries()
ä¸`Object.keys`ç±»ä¼¼ï¼Œä»¥æ•°ç»„çš„æ–¹å¼è¿”å› keys å’Œvalues.

```js
const cars = { 'BMW': 3, 'Tesla': 2, 'Toyota': 1 };

//ES2017 and æœªæ¥
const values = Object.entries(cars);
console.log(values); // [["BMW",3],["Tesla",2],["Toyota",1]]

```

## String padding

å‘å­—ç¬¦ä¸² â€“ `String.prototype.padStart`å’Œ`String.prototype.padEnd`æ·»åŠ äº†ä¸¤ä¸ªå®ä¾‹æ–¹æ³• â€“ å®ƒä»¬å…è®¸åœ¨åŸå§‹å­—ç¬¦ä¸²çš„å¼€å§‹æˆ–ç»“å°¾é™„åŠ /é¢„å…ˆæ·»åŠ ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²ã€‚

è¯­æ³•ï¼š `'someString'.padStart(numberOfCharcters [,stringForPadding]); `


```js
/ES2017
//å¦‚æœä½ æœ‰ä¸€ä¸ªä¸åŒé•¿åº¦çš„é¡¹ç›®åˆ—è¡¨ï¼Œå¹¶å¸Œæœ›æ ¼å¼åŒ–å®ƒä»¬çš„æ˜¾ç¤ºç›®çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨padStart

const formatted = [0, 1, 12, 123, 1234, 12345].map(num => 
	num.toString().padStart(10, '0') // æ·»åŠ  0 ç›´åˆ°é•¿åº¦ä¸º 10
);

console.log(formatted);

//æ‰“å°
// [
// 	'0000000000',
// 	'0000000001',
// 	'0000000012',
// 	'0000000123',
// 	'0000001234',
// 	'0000012345',
// ]
```


```js
const cars = {
  'ğŸš™BMW': '10',
  'ğŸš˜Tesla': '5',
  'ğŸš–Lamborghini': '0'
}
Object.entries(cars).map(([name, count]) => {
  //padEnd appends ' -' until the name becomes 20 characters
  //padStart prepends '0' until the count becomes 3 characters.
  console.log(`${name.padEnd(20, ' -')} Count: ${count.padStart(3, '0')}`)
});
//æ‰“å°ç»“æœ..
// ğŸš™BMW - - - - - - -  Count: 010
// ğŸš˜Tesla - - - - - -  Count: 005
// ğŸš–Lamborghini - - -  Count: 000

```




##å­—ç¬¦ä¸²æ–¹æ³• includes(), startsWith(), endsWith()
* includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚
* startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚
* endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚

```js
var s = 'Hello world!';

s.startsWith('Hello') // true
s.endsWith('!') // true
s.includes('o') // true
s.startsWith('world', 6) // true
s.endsWith('Hello', 5) // true
s.includes('Hello', 6) // false
```

##æ¨¡æ¿å­—ç¬¦ä¸²
ä½¿ç”¨åå¼•å· ( ` ),æ ‡è¯†

```js
// æ™®é€šå­—ç¬¦ä¸²
`In JavaScript '\n' is a line-feed.`

// å¤šè¡Œå­—ç¬¦ä¸²
`In JavaScript this is
 not legal.`

console.log(`string text line 1
string text line 2`);

// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡
var name = "Bob", time = "today";
`Hello ${name}, how are you ${time}?`
```

## iterator
`Array` `Map`  `Set`  `String` `TypedArray`  `å‡½æ•°çš„ arguments å¯¹è±¡`  `NodeList å¯¹è±¡` åŸç”Ÿå…·å¤‡ Iterator æ¥å£ã€‚

**for...of å¾ªç¯**
ä¸forEach ä¸åŒæ˜¯ï¼Œ `for...of`å®¹è®¸è·å–é”®å€¼ï¼Œå¯ä»¥ä¸`break`ã€`continue`å’Œ`return`é…åˆä½¿ç”¨


```js
for (let elem of ['a', 'b']) {
  console.log(elem);
}
// a
// b

for (let index of ['a', 'b'].keys()) {
  console.log(index);
}
// 0
// 1

for (let elem of ['a', 'b'].values()) {
  console.log(elem);
}
// 'a'
// 'b'

for (let [index, elem] of ['a', 'b'].entries()) {
  console.log(index, elem);
}
// 0 "a"
// 1 "b"
```


## ä¿®é¥°å™¨ Decorator

**ä¿®é¥°ç±»**

```js
@decorator
class A {}

// ç­‰åŒäº

class A {}
A = decorator(A) || A;
```

**æ–¹æ³•çš„ä¿®é¥°**


```js
class Math {
  @log
  add(a, b) {
    return a + b;
  }
}
// ç±»ä¼¼äº
//Object.defineProperty(Math.prototype, 'add', descriptor);
// descriptorå¯¹è±¡åŸæ¥çš„å€¼å¦‚ä¸‹
// {
//   value: specifiedFunction,
//   enumerable: false,
//   configurable: true,
//   writable: true
// };

function log(target, name, descriptor) {
  var oldValue = descriptor.value;
  descriptor.value = function() {
    console.log(`Calling ${name} with`, arguments);
    return oldValue.apply(null, arguments);
  };

  return descriptor;
}

const math = new Math();

// passed parameters should get logged now
math.add(2, 4);
// Calling add with [2,4]
```


## Async/Await


```js
//å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ªPromise
async function doubleAndAdd(a, b) {
	a = await doubleAfterlSec(a);
	b = await doubleAfterlSec(b);
	return a + b;
}

//ç”¨æ³•
doubleAndAdd(1, 2).then(console.log);

function doubleAfterlSec(param) {
	return new Promise (resolve => {
		setTimeout(resolve(param * 2), 1000);
	});
}

```

## Promise.prototype.finally()

finally() æ˜¯æ·»åŠ åˆ°Promiseçš„æ–°å®ä¾‹æ–¹æ³•ã€‚ä»–çš„ä¸»è¦æƒ³æ³•æ˜¯å…è®¸åœ¨è§£å†³æˆ–æ‹’ç»ä¹‹åè¿è¡Œå›è°ƒä»¥å¸®åŠ©æ¸…ç†äº‹æƒ…ã€‚finallyå›è°ƒè¢«è°ƒç”¨æ—¶æ²¡æœ‰ä»»ä½•ä»·å€¼ï¼Œå¹¶ä¸”æ— è®ºå¦‚ä½•æ€»æ˜¯è¢«æ‰§è¡Œã€‚


## æ­£åˆ™è¡¨è¾¾å¼çš„â€œdotallâ€æ ‡å¿—

è™½ç„¶dotï¼ˆâ€œ.â€ï¼‰åº”è¯¥åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œä½†å®ƒä¸åŒ¹é…åƒ`\n \r \f`ç­‰æ–°è¡Œå­—ç¬¦ã€‚


```js
//ä¹‹å‰
/first.second/.test('first\nsecond'); //false

//ECMAScript 2018
/first.second/s.test('first\nsecond'); //true   Notice: /s ğŸ‘ˆğŸ¼

```
