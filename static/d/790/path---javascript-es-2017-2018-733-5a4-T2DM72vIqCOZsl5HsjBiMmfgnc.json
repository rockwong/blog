{"data":{"markdownRemark":{"html":"<h1>ES 2017-2018</h1>\n<blockquote>\n<p>å‚è€ƒï¼š\n<a href=\"http://es6.ruanyifeng.com/\">http://es6.ruanyifeng.com/</a>\n<a href=\"https://blog.hypers.io/2018/04/11/es2016-17-18/\">https://blog.hypers.io/2018/04/11/es2016-17-18/</a></p>\n</blockquote>\n<h2>æŒ‡æ•°è¿ç®—</h2>\n<pre><code class=\"language-js\">// ä¸ä½¿ç”¨\nMath.pow(7,2) //49\n\n//ä½¿ç”¨\n7**2 //49\n</code></pre>\n<h2>æ•°ç»„çš„è§£æ„èµ‹å€¼</h2>\n<p>éœ€è¦ç­‰å·ä¸¤è¾¹éƒ½æ˜¯æ•°ç»„</p>\n<pre><code class=\"language-js\">    var [a, b, c] = [1, 2, 3];\n    let [foo, [[bar], baz]] = [1, [[2], 3]];\n    /* å®¹è®¸æœ‰é»˜è®¤å€¼,å¦‚æœé»˜è®¤å€¼æ˜¯è¡¨è¾¾å¼,é‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼ */\n    var [foo = true] = [];\n</code></pre>\n<h2>å¯¹è±¡çš„è§£æ„èµ‹å€¼</h2>\n<pre><code class=\"language-js\">var { bar, foo } = { foo: \"aaa\", bar: \"bbb\" };\n</code></pre>\n<h2>Object.values()</h2>\n<p>ä¸ <code>Object.keys()</code> ç±»ä¼¼ï¼Œè¿”å›è‡ªèº«æ‰€æœ‰å€¼ï¼Œæ’é™¤åŸå‹é“¾ä¸­çš„ä»»ä½•èŒ</p>\n<pre><code class=\"language-js\">const cars = { 'BMW': 3, 'Tesla': 2, 'Toyota': 1 };\n\n//ES2017 and æœªæ¥\nconst values = Object.values(cars);\nconsole.log(values); // [3, 2, 1]\n</code></pre>\n<h2>Object.entries()</h2>\n<p>ä¸<code>Object.keys</code>ç±»ä¼¼ï¼Œä»¥æ•°ç»„çš„æ–¹å¼è¿”å› keys å’Œvalues.</p>\n<pre><code class=\"language-js\">const cars = { 'BMW': 3, 'Tesla': 2, 'Toyota': 1 };\n\n//ES2017 and æœªæ¥\nconst values = Object.entries(cars);\nconsole.log(values); // [[\"BMW\",3],[\"Tesla\",2],[\"Toyota\",1]]\n</code></pre>\n<h2>String padding</h2>\n<p>å‘å­—ç¬¦ä¸² â€“ <code>String.prototype.padStart</code>å’Œ<code>String.prototype.padEnd</code>æ·»åŠ äº†ä¸¤ä¸ªå®ä¾‹æ–¹æ³• â€“ å®ƒä»¬å…è®¸åœ¨åŸå§‹å­—ç¬¦ä¸²çš„å¼€å§‹æˆ–ç»“å°¾é™„åŠ /é¢„å…ˆæ·»åŠ ç©ºå­—ç¬¦ä¸²æˆ–å…¶ä»–å­—ç¬¦ä¸²ã€‚</p>\n<p>è¯­æ³•ï¼š <code>'someString'.padStart(numberOfCharcters [,stringForPadding]);</code></p>\n<pre><code class=\"language-js\">/ES2017\n//å¦‚æœä½ æœ‰ä¸€ä¸ªä¸åŒé•¿åº¦çš„é¡¹ç›®åˆ—è¡¨ï¼Œå¹¶å¸Œæœ›æ ¼å¼åŒ–å®ƒä»¬çš„æ˜¾ç¤ºç›®çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨padStart\n\nconst formatted = [0, 1, 12, 123, 1234, 12345].map(num => \n    num.toString().padStart(10, '0') // æ·»åŠ  0 ç›´åˆ°é•¿åº¦ä¸º 10\n);\n\nconsole.log(formatted);\n\n//æ‰“å°\n// [\n//  '0000000000',\n//  '0000000001',\n//  '0000000012',\n//  '0000000123',\n//  '0000001234',\n//  '0000012345',\n// ]\n</code></pre>\n<pre><code class=\"language-js\">const cars = {\n  'ğŸš™BMW': '10',\n  'ğŸš˜Tesla': '5',\n  'ğŸš–Lamborghini': '0'\n}\nObject.entries(cars).map(([name, count]) => {\n  //padEnd appends ' -' until the name becomes 20 characters\n  //padStart prepends '0' until the count becomes 3 characters.\n  console.log(`${name.padEnd(20, ' -')} Count: ${count.padStart(3, '0')}`)\n});\n//æ‰“å°ç»“æœ..\n// ğŸš™BMW - - - - - - -  Count: 010\n// ğŸš˜Tesla - - - - - -  Count: 005\n// ğŸš–Lamborghini - - -  Count: 000\n</code></pre>\n<h2>å­—ç¬¦ä¸²æ–¹æ³• includes(), startsWith(), endsWith()</h2>\n<ul>\n<li>includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚</li>\n<li>startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚</li>\n<li>endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨æºå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚</li>\n</ul>\n<pre><code class=\"language-js\">var s = 'Hello world!';\n\ns.startsWith('Hello') // true\ns.endsWith('!') // true\ns.includes('o') // true\ns.startsWith('world', 6) // true\ns.endsWith('Hello', 5) // true\ns.includes('Hello', 6) // false\n</code></pre>\n<h2>æ¨¡æ¿å­—ç¬¦ä¸²</h2>\n<p>ä½¿ç”¨åå¼•å· ( ` ),æ ‡è¯†</p>\n<pre><code class=\"language-js\">// æ™®é€šå­—ç¬¦ä¸²\n`In JavaScript '\\n' is a line-feed.`\n\n// å¤šè¡Œå­—ç¬¦ä¸²\n`In JavaScript this is\n not legal.`\n\nconsole.log(`string text line 1\nstring text line 2`);\n\n// å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡\nvar name = \"Bob\", time = \"today\";\n`Hello ${name}, how are you ${time}?`\n</code></pre>\n<h2>iterator</h2>\n<p><code>Array</code> <code>Map</code>  <code>Set</code>  <code>String</code> <code>TypedArray</code>  <code>å‡½æ•°çš„ arguments å¯¹è±¡</code>  <code>NodeList å¯¹è±¡</code> åŸç”Ÿå…·å¤‡ Iterator æ¥å£ã€‚</p>\n<p><strong>for...of å¾ªç¯</strong>\nä¸forEach ä¸åŒæ˜¯ï¼Œ <code>for...of</code>å®¹è®¸è·å–é”®å€¼ï¼Œå¯ä»¥ä¸<code>break</code>ã€<code>continue</code>å’Œ<code>return</code>é…åˆä½¿ç”¨</p>\n<pre><code class=\"language-js\">for (let elem of ['a', 'b']) {\n  console.log(elem);\n}\n// a\n// b\n\nfor (let index of ['a', 'b'].keys()) {\n  console.log(index);\n}\n// 0\n// 1\n\nfor (let elem of ['a', 'b'].values()) {\n  console.log(elem);\n}\n// 'a'\n// 'b'\n\nfor (let [index, elem] of ['a', 'b'].entries()) {\n  console.log(index, elem);\n}\n// 0 \"a\"\n// 1 \"b\"\n</code></pre>\n<h2>ä¿®é¥°å™¨ Decorator</h2>\n<p><strong>ä¿®é¥°ç±»</strong></p>\n<pre><code class=\"language-js\">@decorator\nclass A {}\n\n// ç­‰åŒäº\n\nclass A {}\nA = decorator(A) || A;\n</code></pre>\n<p><strong>æ–¹æ³•çš„ä¿®é¥°</strong></p>\n<pre><code class=\"language-js\">class Math {\n  @log\n  add(a, b) {\n    return a + b;\n  }\n}\n// ç±»ä¼¼äº\n//Object.defineProperty(Math.prototype, 'add', descriptor);\n// descriptorå¯¹è±¡åŸæ¥çš„å€¼å¦‚ä¸‹\n// {\n//   value: specifiedFunction,\n//   enumerable: false,\n//   configurable: true,\n//   writable: true\n// };\n\nfunction log(target, name, descriptor) {\n  var oldValue = descriptor.value;\n  descriptor.value = function() {\n    console.log(`Calling ${name} with`, arguments);\n    return oldValue.apply(null, arguments);\n  };\n\n  return descriptor;\n}\n\nconst math = new Math();\n\n// passed parameters should get logged now\nmath.add(2, 4);\n// Calling add with [2,4]\n</code></pre>\n<h2>Async/Await</h2>\n<pre><code class=\"language-js\">//å¼‚æ­¥å‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ªPromise\nasync function doubleAndAdd(a, b) {\n    a = await doubleAfterlSec(a);\n    b = await doubleAfterlSec(b);\n    return a + b;\n}\n\n//ç”¨æ³•\ndoubleAndAdd(1, 2).then(console.log);\n\nfunction doubleAfterlSec(param) {\n    return new Promise (resolve => {\n        setTimeout(resolve(param * 2), 1000);\n    });\n}\n</code></pre>\n<h2>Promise.prototype.finally()</h2>\n<p>finally() æ˜¯æ·»åŠ åˆ°Promiseçš„æ–°å®ä¾‹æ–¹æ³•ã€‚ä»–çš„ä¸»è¦æƒ³æ³•æ˜¯å…è®¸åœ¨è§£å†³æˆ–æ‹’ç»ä¹‹åè¿è¡Œå›è°ƒä»¥å¸®åŠ©æ¸…ç†äº‹æƒ…ã€‚finallyå›è°ƒè¢«è°ƒç”¨æ—¶æ²¡æœ‰ä»»ä½•ä»·å€¼ï¼Œå¹¶ä¸”æ— è®ºå¦‚ä½•æ€»æ˜¯è¢«æ‰§è¡Œã€‚</p>\n<h2>æ­£åˆ™è¡¨è¾¾å¼çš„â€œdotallâ€æ ‡å¿—</h2>\n<p>è™½ç„¶dotï¼ˆâ€œ.â€ï¼‰åº”è¯¥åŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œä½†å®ƒä¸åŒ¹é…åƒ<code>\\n \\r \\f</code>ç­‰æ–°è¡Œå­—ç¬¦ã€‚</p>\n<pre><code class=\"language-js\">//ä¹‹å‰\n/first.second/.test('first\\nsecond'); //false\n\n//ECMAScript 2018\n/first.second/s.test('first\\nsecond'); //true   Notice: /s ğŸ‘ˆğŸ¼\n</code></pre>","frontmatter":{"title":"ES 2017-2018"}}},"pageContext":{"slug":"/notes/ES 2017-2018/","tagPath":"/Javascript/ES 2017-2018/"}}