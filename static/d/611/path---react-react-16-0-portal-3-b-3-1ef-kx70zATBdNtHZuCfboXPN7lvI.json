{"data":{"markdownRemark":{"html":"<h1>React 16.0 Portal</h1>\n<blockquote>\n<p>来自 <a href=\"https://zhuanlan.zhihu.com/p/29880992\">https://zhuanlan.zhihu.com/p/29880992</a></p>\n</blockquote>\n<h2>什么是Portal</h2>\n<p>在React中render到一个组件里面去，实际改变的是网页上另一处的DOM结构,类似传送门的效果。</p>\n<h2>Portal的应用</h2>\n<p><strong>React v15对话框组件Dialog的实现</strong></p>\n<pre><code class=\"language-js\">import React from 'react';\nimport {unstable_renderSubtreeIntoContainer, unmountComponentAtNode} \n  from 'react-dom';\n\nclass Dialog extends React.Component {\n  render() {\n    return null;\n  }\n\n  componentDidMount() {\n    const doc = window.document;\n    this.node = doc.createElement('div');\n    doc.body.appendChild(this.node);\n\n    this.renderPortal(this.props);\n  }\n\n  componentDidUpdate() {\n    this.renderPortal(this.props);\n  }\n\n  componentWillUnmount() {\n    unmountComponentAtNode(this.node);\n    window.document.body.removeChild(this.node);\n  }\n\n  renderPortal(props) {\n    unstable_renderSubtreeIntoContainer(\n      this, //代表当前组件\n      &#x3C;div class=\"dialog\">\n        {props.children}\n      &#x3C;/div>, // 塞进传送门的JSX\n      this.node // 传送门另一端的DOM node\n    );\n  }\n}\n</code></pre>\n<p><strong>React v16的Portal支持</strong></p>\n<pre><code class=\"language-js\">import React from 'react';\nimport {createPortal} from 'react-dom';\n\nclass Dialog extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    const doc = window.document;\n    this.node = doc.createElement('div');\n    doc.body.appendChild(this.node);\n  }\n\n  render() {\n    return createPortal(\n      &#x3C;div class=\"dialog\">\n        {this.props.children}\n      &#x3C;/div>, //塞进传送门的JSX\n      this.node //传送门的另一端DOM node\n    );\n  }\n\n  componentWillUnmount() {\n    window.document.body.removeChild(this.node);\n  }\n}\n</code></pre>","frontmatter":{"title":"React 16.0 Portal"}}},"pageContext":{"slug":"/notes/React 16.0 Portal/","tagPath":"/React/React 16.0 Portal/"}}